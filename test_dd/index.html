<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Drag and Drop</title>
<link href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet"/>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
</head>
<body>
<div class="wrapper">
<div class="draggableWrap">
<div class="draggable" id="draggable1">Draggable 1</div>
<div class="draggable" id="draggable2">Draggable 2</div>
<div class="draggable" id="draggable3">Draggable 3</div>
<div class="draggable" id="draggable4">Draggable 4</div>
</div>
<div class="droppableWrap">
<div class="droppable" id="droppable1">Droppable 1</div>
<div class="droppable" id="droppable2">Droppable 2</div>
<div class="droppable" id="droppable3">Droppable 3</div>
<div class="droppable" id="droppable4">Droppable 4</div>
</div>
</div>
<script>
$(function() {
    $(".draggable").draggable({
        helper: 'clone',
        revert: function(droppableObj) {
            if (droppableObj && $(droppableObj).children('.clonedElement').length === 0) {
                return false;
            }
            return true;
        },
        revert: 'invalid',
        snap: ".droppable",
        
snapMode: "inner",
start: function(event, ui) {
    let droppableWidth = $(".droppable").width();
    let droppableHeight = $(".droppable").height();
    ui.helper.css({"width": droppableWidth, "height": droppableHeight});
}

    });

    $(".droppable").droppable({
        accept: ".draggable, .clonedElement",
        drop: function(event, ui) {
          let numberOfElements = $(this).children('.clonedElement').length;

          if (numberOfElements > 0) {
                return;
            }

            if (ui.draggable.hasClass('clonedElement')) {
                ui.draggable.position({
                    of: $(this),
                    my: "left top",
                    at: "left top"
                });
            } else {
                var clonedElement = ui.helper.clone().removeClass('ui-draggable-dragging').addClass('clonedElement');
                $(this).append(clonedElement);
                makeDraggable(clonedElement);
            }
        }
    });

    function makeDraggable(element) {
        element.draggable({
            revert: 'invalid',
            snap: ".droppable",
            snapMode: "inner"
        });
    }
});


$(window).resize(function() {
    $('.clonedElement').each(function() {
        var parent = $(this).parent();
        $(this).position({
            of: parent,
            my: 'left top',
            at: 'left top'
        });
    });
});
</script>
<style>
    .wrapper {
        display: flex;
    }
    .draggableWrap, .droppableWrap {
        display: flex;
    }

.draggable, .droppable {
    width: 100px;
    height: 100px;
    margin: 10px;
    border: 1px solid black;
}
.draggable{
    width: 200px;
    height: 200px;
}

.droppable {
    background-color: #f5f5f5;
}
</style>
</body>
</html>
